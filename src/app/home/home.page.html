<ion-header class="ion-no-border">
  <ion-toolbar color="light" class="chat-header">
    <ion-item lines="none" color="light">
      <ion-avatar slot="start">
        <img src="https://api.dicebear.com/7.x/bottts/svg?seed=GrammarBot" alt="Bot Avatar" />
      </ion-avatar>
      <ion-label>
        <h2>Grammar Bot</h2>
        <p>Online ‚Ä¢ Live Checker</p>
      </ion-label>
      <ion-icon name="ellipsis-vertical" slot="end" color="medium"></ion-icon>
    </ion-item>
  </ion-toolbar>
</ion-header>

<ion-content class="chat-content" [fullscreen]="true">
  <div class="chat-container">

    <!-- Welcome Message -->
    <div class="message-wrapper bot">
      <ion-avatar class="message-avatar">
        <img src="https://api.dicebear.com/7.x/bottts/svg?seed=GrammarBot" />
      </ion-avatar>
      <div class="message-bubble">
        <p>Hello! üëã I'm your AI Grammar Assistant.</p>
        <p>Start typing in the box below, and I will automatically check your grammar in real-time!</p>
      </div>
    </div>

    <!-- Result Message (Only appears when there is a result) -->
    <div class="message-wrapper bot" *ngIf="grammarResult && !isLoading">
      <ion-avatar class="message-avatar">
        <img src="https://api.dicebear.com/7.x/bottts/svg?seed=GrammarBot" />
      </ion-avatar>
      <div class="message-bubble result" [class.correct]="grammarResult.status === 'Correct'"
        [class.incorrect]="grammarResult.status === 'Incorrect'">
        <div class="result-header">
          <span class="status-indicator">
            {{ grammarResult.status === 'Correct' ? '‚úÖ Correct' : '‚ùå Incorrect' }}
          </span>
        </div>

        <p class="result-text" *ngIf="grammarResult.status === 'Incorrect'">
          <strong>Correction:</strong><br>
          {{ grammarResult.correction }}
        </p>
        <p class="result-text" *ngIf="grammarResult.status === 'Correct'">
          {{ grammarResult.correction }}
        </p>

        <div class="message-time">Just now</div>
      </div>
    </div>

    <!-- Loading Indicator -->
    <div class="message-wrapper bot" *ngIf="isLoading">
      <ion-avatar class="message-avatar">
        <img src="https://api.dicebear.com/7.x/bottts/svg?seed=GrammarBot" />
      </ion-avatar>
      <div class="message-bubble loading">
        <ion-spinner name="dots" color="dark"></ion-spinner>
      </div>
    </div>

  </div>
</ion-content>

<ion-footer class="ion-no-border">
  <ion-toolbar class="input-toolbar">
    <div class="input-container">
      <ion-textarea [formControl]="inputControl" placeholder="Type a sentence..." rows="1" autoGrow="true"
        class="chat-input"></ion-textarea>
    </div>
  </ion-toolbar>
</ion-footer>